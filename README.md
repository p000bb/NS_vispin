简体中文 | [English](./README.en.md)

# 芯片引脚可视化配置系统

## 项目简介

基于国民技术提供的加密芯片数据，进行芯片引脚可视化配置系统，主要用于：

- **在线可视化配置**：通过直观的可视化界面进行芯片引脚功能分配
- **项目管理**：支持多项目管理，便于维护不同项目的芯片数据
- **冲突检测**：实时检测引脚功能冲突，提供智能提示
- **数据导出**：支持导出 Excel、SVG、PNG、PDF 等多种格式

## 业务流程

1. 进入芯片引脚可视化配置页面
2. 在页面中选择需要配置的芯片（**芯片数据由国民技术提供加密后的数据**）
3. 页面中进行引脚功能分配

## 📖 使用指南

### 1. 项目管理

#### 创建新项目

1. 在首页点击 **"新增项目"** 按钮
2. 输入项目名称（必填）和备注信息（可选）
3. 点击 **"上传TXT"** 按钮，上传加密后的芯片数据
4. 点击 **"确认"** 保存项目

### 编辑项目

1. 在项目列表中点击项目卡片上的 **编辑按钮**
2. 修改项目名称或备注信息
3. 点击 **"确认"** 保存修改

#### 删除项目

1. 在项目列表中点击项目卡片上的 **删除按钮**
2. 确认删除操作（**将同时删除该项目下的所有芯片数据**）

---

### 2. 芯片数据管理

#### 解析芯片数据

1. 点击 **"上传TXT"** 按钮，上传加密后的芯片数据
2. 系统会自动解析数据并展示在芯片列表中

#### 删除芯片数据

1. 在芯片列表中点击对应芯片右侧的 **删除按钮**
2. 确认删除操作
3. 保存项目后，芯片数据会自动删除

---

### 3. 引脚配置预览

#### 搜索引脚

在预览页面顶部左侧的搜索框中输入关键字，系统会在以下位置搜索：

- **引脚名称**（如 PA0, PB1）
- **引脚数字功能**（Digital 功能列表）
- **引脚模拟功能**（Analog 功能列表）

**搜索特性：**
- 输入至少 2 个字符后开始搜索
- 匹配的引脚会高亮闪烁 5 秒
- 支持实时搜索

#### 切换芯片

在搜索框右侧的下拉框中选择项目下的其他芯片，即可切换查看不同芯片的引脚配置。

#### 选择引脚功能

1. **点击引脚**：点击中间芯片图中的任意引脚
2. **选择功能**：在弹出的下拉菜单中选择要分配的功能
   - **Common**：通用功能（Reset、Input、Output、EXTI）`蓝色边框`
   - **Digital**：数字功能列表`绿色边框`
   - **Analog**：模拟功能列表`红色边框`

3. **确认选择**：点击功能选项完成分配

#### 冲突检测

系统会实时检测引脚功能冲突：

- **冲突提示**：如果选择的引脚功能与其他引脚冲突，下拉菜单中会以 **黄色背景** 高亮显示冲突选项
- **冲突确认**：点击冲突选项时，系统会弹出确认对话框，显示冲突的引脚信息
- **冲突高亮**：冲突的引脚会在芯片图上以 **红色闪烁** 提示
- **冲突详情**：可在右下角工具栏的 **"信息"** 面板中查看所有冲突详情

#### 清除引脚功能

在引脚功能下拉菜单中选择 **"Reset"** 选项，即可清除该引脚的功能分配。

---

### 4. 工具栏功能

预览页面右下角提供以下工具：

#### 🔄 撤销/重做

- **撤销**：撤销上一步操作（快捷键：Ctrl+Z）
- **重做**：重做已撤销的操作（快捷键：Ctrl+Y）
- 支持多级撤销/重做

#### 🔍 缩放与拖拽

- **缩放**：使用鼠标滚轮缩放画布
- **拖拽**：按住空格和鼠标左键拖拽画布移动
- **重置布局**：重置画布布局到默认状态（快捷键：Ctrl+0）

#### ⚙️ 设置

点击设置按钮打开配置面板：

**芯片配置：**
- **芯片比例**：调整芯片大小（0.5x - 2.0x）
- **字体大小**：调整引脚名称字体大小
- **开始位置**：选择引脚编号开始位置（左上角/右上角/右下角/左下角）
- **开始方向**：选择引脚编号开始方向（顺时针/逆时针）
- **芯片边数**：选择芯片边数（2边/4边）

**引脚配置：**
- **数字功能颜色**：自定义数字功能引脚的颜色
- **模拟功能颜色**：自定义模拟功能引脚的颜色
- **通用功能颜色**：自定义通用功能引脚的颜色
- 可根据个人喜好进行颜色定制

#### 🖥️ 全屏/取消全屏

- **全屏**：点击全屏按钮进入全屏模式
- **取消全屏**：在全屏模式下点击取消全屏按钮退出

#### 💾 下载

点击下载按钮打开下载面板，支持导出以下格式：

**Excel 导出：**
- 导出当前项目的所有芯片配置
- 包含引脚信息、功能选择等
- 支持多芯片数据合并导出

**SVG 导出：**
- 导出矢量图形格式
- 可无损放大，适合打印和文档使用

**PNG 导出：**
- 导出位图格式
- 适合截图和快速分享

**PDF 导出：**
- 导出 PDF 文档
- 适合正式文档归档

#### 🔄恢复默认

点击恢复默认按钮，恢复当前芯片所有引脚配置的值

#### 📊 信息面板

点击信息按钮打开信息面板，包含两个标签页：

**统计信息：**
- 总引脚数
- 已使用引脚数
- 未使用引脚数
- 冲突引脚数
- 各类型引脚统计（数字/模拟/通用）

**冲突详情：**
- 显示所有引脚冲突情况
- 列出冲突的引脚对
- 提供冲突原因说明
- 支持快速定位冲突引脚

**冲突配置**
- 功能冲突检测：
  - 同一功能不能分配给多个引脚
- EXTI中断线冲突检测：
  - 同一 EXTI 线不能分配给多个引脚

#### 🗃️ 效果图
<table>
<tr>
<td>
<img src="https://gcore.jsdelivr.net/gh/p000bb/Image/NTFx/image-1.png">
</td>
<td>
<img src="https://gcore.jsdelivr.net/gh/p000bb/Image/NTFx/image-2.png">
</td>
</tr>
<tr>
<td>
<img src="https://gcore.jsdelivr.net/gh/p000bb/Image/NTFx/image-3.png">
</td>
<td>
<img src="https://gcore.jsdelivr.net/gh/p000bb/Image/NTFx/image-4.png">
</td>
</tr>
</table>